<profile>
  <div class="navbar-custom-menu">
    <ul class="nav navbar-nav">
      <!-- Messages: style can be found in dropdown.less-->
      <!-- User Account Menu -->
      <li class="dropdown user user-menu">
        <!-- Menu Toggle Button -->
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
          <!-- The user image in the navbar-->
          <img src="/assets/vendors/adminlte/img/user2-160x160.jpg" class="user-image" alt="User Image">
          <!-- hidden-xs hides the username on small devices so only the image appears. -->
          <span class="hidden-xs">{user.nickName || user.username}</span>
        </a>
        <ul class="dropdown-menu">
          <!-- The user image in the menu -->
          <li class="user-header">
            <img src="/assets/vendors/adminlte/img/user2-160x160.jpg" class="img-circle" alt="User Image">
            <p>
              {user.nickName || user.username} - {user.type == 'user' ? '普通用户' : '管理员'}
              <!-- <small>Member since Nov. 2012</small> -->
            </p>
          </li>
          <!-- Menu Footer-->
          <li class="user-footer">
            <div class="pull-left">
              <a href="javascript:;" class="btn btn-default btn-flat">个人资料</a>
            </div>
            <div class="pull-right">
              <a href="javascript:;" onclick={logout} class="btn btn-default btn-flat">登出系统</a>
            </div>
          </li>
        </ul>
      </li>
      <!-- Control Sidebar Toggle Button -->
      <!-- <li>
        <a href="#" data-toggle="control-sidebar"><i class="fa fa-gears"></i></a>
      </li> -->
    </ul>
  </div>

  <script>
    var _this = this;
    this.user = riot.data.user;

    logout() {
      $.ajax({
        url: riot.config.apiPrefix + 'system/user/logout',
        type: 'get'
      }).then(function(data) {
        location.href = '/';
      });
    }
  </script>
</profile>
